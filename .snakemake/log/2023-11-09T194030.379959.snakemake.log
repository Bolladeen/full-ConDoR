Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cluster nodes: 3000
Job stats:
job                  count
-----------------  -------
all                      1
condor_inputs            1
fast_condor              1
generate_heatmaps        1
total                    4

Select jobs to execute...

[Thu Nov  9 19:40:35 2023]
rule condor_inputs:
    input: /home/zhangh5/work/Tapestri_batch2/analysis/condor_pipeline/0-opt_nclones/M04.sample_sc_clone_assignment.updated.csv
    output: condor_inputs/M04/character_vaf_matrix.csv, condor_inputs/M04/character_bin_matrix.csv, condor_inputs/M04/alt_readcounts.csv, condor_inputs/M04/total_readcounts.csv, condor_inputs/M04/germline_mutations.txt, condor_inputs/M04/somatic_mutations.txt
    log: condor_inputs/M04/condor_inputs.log, condor_inputs/M04/condor_inputs.err.log
    jobid: 1
    reason: Missing output files: condor_inputs/M04/germline_mutations.txt, condor_inputs/M04/character_bin_matrix.csv, condor_inputs/M04/total_readcounts.csv, condor_inputs/M04/alt_readcounts.csv, condor_inputs/M04/somatic_mutations.txt, condor_inputs/M04/character_vaf_matrix.csv
    wildcards: dataset=M04
    threads: 4
    resources: mem_mb=8000, mem_mib=7630, disk_mb=1000, disk_mib=954, tmpdir=<TBD>, time_min=59

Submitted job 1 with external jobid '87358992 logs/cluster/condor_inputs/dataset=M04/jobid1_07570c58-7acc-4d44-a824-1effbb4960a0.out'.
[Thu Nov  9 19:41:07 2023]
Finished job 1.
1 of 4 steps (25%) done
Select jobs to execute...

[Thu Nov  9 19:41:07 2023]
rule fast_condor:
    input: condor_inputs/M04/character_bin_matrix.csv, condor_inputs/M04/alt_readcounts.csv, condor_inputs/M04/total_readcounts.csv, condor_inputs/M04/germline_mutations.txt, condor_inputs/M04/somatic_mutations.txt
    log: condor_outputs/M04/condor_outputs.log, condor_outputs/M04/condor_outputs.err.log
    jobid: 2
    reason: Missing output files: condor_outputs/M04/condor_outputs.log; Input files updated by another job: condor_inputs/M04/germline_mutations.txt, condor_inputs/M04/character_bin_matrix.csv, condor_inputs/M04/total_readcounts.csv, condor_inputs/M04/alt_readcounts.csv, condor_inputs/M04/somatic_mutations.txt
    wildcards: dataset=M04
    threads: 4
    resources: mem_mb=1000, mem_mib=954, disk_mb=1000, disk_mib=954, tmpdir=<TBD>, mem_gb=16, time_min=119

Submitted job 2 with external jobid '87358993 logs/cluster/fast_condor/dataset=M04/jobid2_574cba84-2238-41d1-8db1-2f6356a3991e.out'.
[Thu Nov  9 19:41:52 2023]
Finished job 2.
2 of 4 steps (50%) done
Select jobs to execute...

[Thu Nov  9 19:41:52 2023]
rule generate_heatmaps:
    input: condor_outputs/M04/condor_outputs.log, condor_inputs/M04/character_vaf_matrix.csv, condor_inputs/M04/alt_readcounts.csv, condor_inputs/M04/total_readcounts.csv, condor_inputs/M04/character_bin_matrix.csv, condor_inputs/M04/germline_mutations.txt, condor_inputs/M04/somatic_mutations.txt
    output: condor_outputs/M04/heatmaps/vaf_heatmap.png, condor_outputs/M04/heatmaps/condor_solution_heatmap.png
    log: condor_outputs/M04/heatmaps/heatmaps.log, condor_outputs/M04/heatmaps/heatmaps.err.log
    jobid: 3
    reason: Missing output files: condor_outputs/M04/heatmaps/condor_solution_heatmap.png; Input files updated by another job: condor_inputs/M04/germline_mutations.txt, condor_inputs/M04/character_bin_matrix.csv, condor_inputs/M04/total_readcounts.csv, condor_inputs/M04/alt_readcounts.csv, condor_inputs/M04/somatic_mutations.txt, condor_outputs/M04/condor_outputs.log, condor_inputs/M04/character_vaf_matrix.csv
    wildcards: dataset=M04
    threads: 4
    resources: mem_mb=8000, mem_mib=7630, disk_mb=1000, disk_mib=954, tmpdir=<TBD>, time_min=59

Submitted job 3 with external jobid '87358994 logs/cluster/generate_heatmaps/dataset=M04/jobid3_2ecde475-aef3-4c94-98be-10fc3866a610.out'.
[Thu Nov  9 19:42:17 2023]
Error in rule generate_heatmaps:
    jobid: 3
    input: condor_outputs/M04/condor_outputs.log, condor_inputs/M04/character_vaf_matrix.csv, condor_inputs/M04/alt_readcounts.csv, condor_inputs/M04/total_readcounts.csv, condor_inputs/M04/character_bin_matrix.csv, condor_inputs/M04/germline_mutations.txt, condor_inputs/M04/somatic_mutations.txt
    output: condor_outputs/M04/heatmaps/vaf_heatmap.png, condor_outputs/M04/heatmaps/condor_solution_heatmap.png
    log: condor_outputs/M04/heatmaps/heatmaps.log, condor_outputs/M04/heatmaps/heatmaps.err.log (check log file(s) for error details)
    conda-env: condor
    shell:
        
		python /home/zhangh5/work/Tapestri_batch2/analysis/full-ConDoR/scripts/generate_heatmaps.py 			-d M04 			-c condor_inputs/M04/character_bin_matrix.csv 			-v condor_inputs/M04/character_vaf_matrix.csv 			-s condor_outputs/M04/out_B.csv 			-l /home/zhangh5/work/Tapestri_batch2/batch2_data_compiled/SNV_FILLOUT_results/ 			-g condor_inputs/M04/germline_mutations.txt 			-m condor_inputs/M04/somatic_mutations.txt 			-t condor_inputs/M04/total_readcounts.csv 			-a condor_inputs/M04/alt_readcounts.csv 			-o condor_outputs/M04/heatmaps/condor_solution_heatmap.png 			-p condor_outputs/M04/heatmaps/vaf_heatmap.png 			-i /home/zhangh5/work/Tapestri_batch2/analysis/cn_clones/train-normal_samples/train-combined_8_normals/NB_train-combined_8_normals-results.gene_added.csv 			1> condor_outputs/M04/heatmaps/heatmaps.log 2> condor_outputs/M04/heatmaps/heatmaps.err.log
		
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
    cluster_jobid: 87358994 logs/cluster/generate_heatmaps/dataset=M04/jobid3_2ecde475-aef3-4c94-98be-10fc3866a610.out

Error executing rule generate_heatmaps on cluster (jobid: 3, external: 87358994 logs/cluster/generate_heatmaps/dataset=M04/jobid3_2ecde475-aef3-4c94-98be-10fc3866a610.out, jobscript: /juno/work/iacobuzc/haochen/Tapestri_batch2/analysis/condor_pipeline/.snakemake/tmp.nn41zt2e/snakejob.generate_heatmaps.3.sh). For error details see the cluster log and the log files of the involved rule(s).
Trying to restart job 3.
Select jobs to execute...

[Thu Nov  9 19:42:17 2023]
rule generate_heatmaps:
    input: condor_outputs/M04/condor_outputs.log, condor_inputs/M04/character_vaf_matrix.csv, condor_inputs/M04/alt_readcounts.csv, condor_inputs/M04/total_readcounts.csv, condor_inputs/M04/character_bin_matrix.csv, condor_inputs/M04/germline_mutations.txt, condor_inputs/M04/somatic_mutations.txt
    output: condor_outputs/M04/heatmaps/vaf_heatmap.png, condor_outputs/M04/heatmaps/condor_solution_heatmap.png
    log: condor_outputs/M04/heatmaps/heatmaps.log, condor_outputs/M04/heatmaps/heatmaps.err.log
    jobid: 3
    reason: Missing output files: condor_outputs/M04/heatmaps/condor_solution_heatmap.png; Input files updated by another job: condor_inputs/M04/germline_mutations.txt, condor_inputs/M04/character_bin_matrix.csv, condor_inputs/M04/total_readcounts.csv, condor_inputs/M04/alt_readcounts.csv, condor_inputs/M04/somatic_mutations.txt, condor_outputs/M04/condor_outputs.log, condor_inputs/M04/character_vaf_matrix.csv
    wildcards: dataset=M04
    threads: 8
    resources: mem_mb=8000, mem_mib=7630, disk_mb=1000, disk_mib=954, tmpdir=<TBD>, time_min=118

Submitted job 3 with external jobid '87358995 logs/cluster/generate_heatmaps/dataset=M04/jobid3_a70bb1a0-18c3-4f04-b06e-d812d3e67559.out'.
Terminating processes on user request, this might take some time.
1 out of 1 calls to --cluster-cancel failed.  This is safe to ignore in most cases.
Complete log: ../full-ConDoR/.snakemake/log/2023-11-09T194030.379959.snakemake.log
